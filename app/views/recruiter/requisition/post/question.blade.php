<table class="QuestionTable" id="t" border="1" style="top:0px;left:0px;">
	<tr>
		<td>Select</td>
		<td>Question</td>
		<td><table border="0"><tr><td>Answer</td><td>Point</td><td>Action</td></tr><col width="80"><col width="20"><col width="20"></table>
		<td>Action</td>
	</tr>
	<col width="50">
	<col width="300">
	<col width="200">
	<col width="50">
</table>
<style>
	.QuestionTable {
		margin:0px;padding:0px;
		width:100%;
		box-shadow: 10px 10px 5px #888888;
		border:1px solid #898989;
		
		-moz-border-radius-bottomleft:6px;
		-webkit-border-bottom-left-radius:6px;
		border-bottom-left-radius:6px;
		
		-moz-border-radius-bottomright:6px;
		-webkit-border-bottom-right-radius:6px;
		border-bottom-right-radius:6px;
		
		-moz-border-radius-topright:6px;
		-webkit-border-top-right-radius:6px;
		border-top-right-radius:6px;
		
		-moz-border-radius-topleft:6px;
		-webkit-border-top-left-radius:6px;
		border-top-left-radius:6px;
	}.QuestionTable table{
	    border-collapse: collapse;
	        border-spacing: 0;
		width:100%;
		height:100%;
	}.QuestionTable tr:last-child td:last-child {
		-moz-border-radius-bottomright:6px;
		-webkit-border-bottom-right-radius:6px;
		border-bottom-right-radius:6px;
	}
	.QuestionTable table tr:first-child td:first-child {
		-moz-border-radius-topleft:6px;
		-webkit-border-top-left-radius:6px;
		border-top-left-radius:6px;
	}
	.QuestionTable table tr:first-child td:last-child {
		-moz-border-radius-topright:6px;
		-webkit-border-top-right-radius:6px;
		border-top-right-radius:6px;
	}.QuestionTable tr:last-child td:first-child{
		-moz-border-radius-bottomleft:6px;
		-webkit-border-bottom-left-radius:6px;
		border-bottom-left-radius:6px;
	}.QuestionTable tr:hover td{
		background-color:#e3efff;
	}
	.QuestionTable tr:nth-child(odd){ background-color:#d3dfff; }
	.QuestionTable tr:nth-child(even)    { background-color:#dbdbff; }.QuestionTable td{
		vertical-align:middle;
		
		
		border:1px solid #898989;
		border-width:0px 1px 1px 0px;
		text-align:left;
		font-size:14px;
		font-family:Arial;
		font-weight:normal;
		color:#000000;
	}
	.QuestionTable tr:first-child td{
			background:-o-linear-gradient(bottom, #4fadf9 5%, #0048ff 100%);	background:-webkit-gradient( linear, left top, left bottom, color-stop(0.05, #4fadf9), color-stop(1, #0048ff) );
		background:-moz-linear-gradient( center top, #4fadf9 5%, #0048ff 100% );
		filter:progid:DXImageTransform.Microsoft.gradient(startColorstr="#4fadf9", endColorstr="#0048ff");	background: -o-linear-gradient(top,#4fadf9,0048ff);

		background-color:#4fadf9;
		border:0px solid #898989;
		text-align:center;
		border-width:0px 0px 1px 1px;
		font-size:14px;
		font-family:Arial;
		font-weight:bold;
		color:#ffffff;
	}
	.QuestionTable tr:first-child:hover td{
		background:-o-linear-gradient(bottom, #4fadf9 5%, #0048ff 100%);	background:-webkit-gradient( linear, left top, left bottom, color-stop(0.05, #4fadf9), color-stop(1, #0048ff) );
		background:-moz-linear-gradient( center top, #4fadf9 5%, #0048ff 100% );
		filter:progid:DXImageTransform.Microsoft.gradient(startColorstr="#4fadf9", endColorstr="#0048ff");	background: -o-linear-gradient(top,#4fadf9,0048ff);

		background-color:#4fadf9;
	}
	.QuestionTable tr:first-child td:first-child{
		border-width:0px 0px 1px 0px;
	}
	.QuestionTable tr:first-child td:last-child{
		border-width:0px 0px 1px 1px;
	}

	.AnswerTable {
		margin:0px;padding:0px;
		width:100%;
		border:1px solid #000000;
		
		-moz-border-radius-bottomleft:0px;
		-webkit-border-bottom-left-radius:0px;
		border-bottom-left-radius:0px;
		
		-moz-border-radius-bottomright:0px;
		-webkit-border-bottom-right-radius:0px;
		border-bottom-right-radius:0px;
		
		-moz-border-radius-topright:0px;
		-webkit-border-top-right-radius:0px;
		border-top-right-radius:0px;
		
		-moz-border-radius-topleft:0px;
		-webkit-border-top-left-radius:0px;
		border-top-left-radius:0px;
	}.AnswerTable table{
	    border-collapse: collapse;
	        border-spacing: 0;
		width:100%;
		height:100%;
		margin:0px;padding:0px;
	}.AnswerTable tr:last-child td:last-child {
		-moz-border-radius-bottomright:0px;
		-webkit-border-bottom-right-radius:0px;
		border-bottom-right-radius:0px;
	}
	.AnswerTable table tr:first-child td:first-child {
		-moz-border-radius-topleft:0px;
		-webkit-border-top-left-radius:0px;
		border-top-left-radius:0px;
	}
	.AnswerTable table tr:first-child td:last-child {
		-moz-border-radius-topright:0px;
		-webkit-border-top-right-radius:0px;
		border-top-right-radius:0px;
	}.AnswerTable tr:last-child td:first-child{
		-moz-border-radius-bottomleft:0px;
		-webkit-border-bottom-left-radius:0px;
		border-bottom-left-radius:0px;
	}
	.AnswerTable tr:hover td{
		background-color:#f5f5ff;
	}
	.AnswerTable td{
		vertical-align:middle;
		
		background-color:#e3efff;

		border:1px solid #000000;
		border-width:0px 1px 1px 0px;
		text-align:left;
		padding:0px;
		font-size:10px;
		font-family:Arial;
		font-weight:normal;
		color:#000000;
	}.AnswerTable tr:last-child td{
		border-width:0px 1px 0px 0px;
	}.AnswerTable tr td:last-child{
		border-width:0px 0px 1px 0px;
	}.AnswerTable tr:last-child td:last-child{
		border-width:0px 0px 0px 0px;
	}
	.AnswerTable tr:first-child td{
		background:-o-linear-gradient(bottom, #e3efff 5%, #e3efff 100%);	background:-webkit-gradient( linear, left top, left bottom, color-stop(0.05, #e3efff), color-stop(1, #e3efff) );
		background:-moz-linear-gradient( center top, #e3efff 5%, #e3efff 100% );
		filter:progid:DXImageTransform.Microsoft.gradient(startColorstr="#e3efff", endColorstr="#e3efff");	background: -o-linear-gradient(top,#e3efff,ddddff);
		background-color:#e3efff;
		border:0px solid #000000;
		text-align:left;
		border-width:0px 0px 1px 1px;
		font-size:10px;
		font-family:Arial;
		font-weight:normal;
		color:#000000;
	}
	.AnswerTable tr:first-child:hover td{
		background:-o-linear-gradient(bottom, #f5f5ff 5%, #f5f5ff 100%);	background:-webkit-gradient( linear, left top, left bottom, color-stop(0.05, #f5f5ff), color-stop(1, #f5f5ff) );
		background:-moz-linear-gradient( center top, #f5f5ff 5%, #f5f5ff 100% );
		filter:progid:DXImageTransform.Microsoft.gradient(startColorstr="#f5f5ff", endColorstr="#f5f5ff");	background: -o-linear-gradient(top,#f5f5ff,f5f5ff);
		background-color:#f5f5ff;
	}
	.AnswerTable tr:first-child td:first-child{
		border-width:0px 0px 1px 0px;
	}
	.AnswerTable tr:first-child td:last-child{
		border-width:0px 0px 1px 1px;
	}
</style>
<input type="button" value="Add Question" onclick="addRow('0',true,'')" />
<script>
	function addRow(v1,v2,v3){
		var table = document.getElementById('t');
        var row = table.insertRow(table.rows.length);
        row.insertCell(0).innerHTML = '<input type="hidden" value="'+v1+'"/><center><input type="checkbox"'+(v2==true?'checked':'')+'/></center>';
        row.insertCell(1).innerHTML = '<input type="text" value="'+v3+'" style="width:100%;height:100%;border:1px;padding:0px;margin:0px;background-color:transparent;"/>';
        var answer = document.createElement("table");
        answer.border = "1";
        answer.className = "AnswerTable";
        answer.innerHTML = '<tbody></tbody><col width="1000"><col width="1">';
        var cell2 = row.insertCell(2);
        cell2.appendChild(answer);
        var sbtn = document.createElement("input");
        sbtn.value = 'Add Answer';
        sbtn.type = 'button';
        sbtn.onclick = function(){
          addAnswer(this.parentNode.firstChild.firstChild,"0","","0");
        };
        cell2.appendChild(sbtn);
        var btn = document.createElement("input");
        btn.value = 'Remove';
        btn.type = 'button';
        btn.onclick = function(){
          this.parentNode.parentNode.remove();
          changeHeight();
        };
        row.insertCell(3).appendChild(btn);
        changeHeight();
        return sbtn.parentNode.firstChild.firstChild;
	}
	function addAnswer(table,v1,v2,v3){
        var row = table.insertRow(table.rows.length);
        row.insertCell(0).innerHTML = '<input type="hidden" value="'+v1+'"/><input type="text" value="'+v2+'" style="width:100%;border:1px;padding:5px;margin:0px;background-color:transparent;"/>';
        row.insertCell(1).innerHTML = '<input type="number" value="'+v3+'" style="width:58px;border:1px;padding:5px;margin:0px;background-color:transparent;"/>';
        var btn = document.createElement("input");
        btn.value = 'Remove';
        btn.type = 'button';
        btn.onclick = function(){
          this.parentNode.parentNode.remove();
          changeHeight();
        };
        row.insertCell(2).appendChild(btn);
		changeHeight();
	}
	function changeHeight(){
        parent.document.getElementById("question").height = (document.getElementById('t').offsetHeight+40)+"px";
	}
</script>
@foreach($questions as $question)
	<script>
		var answerTable = addRow( "{{ $question->question_id }}", "{{ $checkOn=='true' && $question->pivot->is_checked }}", "{{ $question->question }}" );
		@foreach($question->answer()->get() as $answer)
			addAnswer( answerTable, "{{ $answer->answer_id }}", "{{ $answer->name }}", "{{ $answer->point }}" );
		@endforeach
	</script>
@endforeach